web:
  image: 
    repository: 992382545251.dkr.ecr.us-east-1.amazonaws.com/at-status-page/status-page-web
    tag: web
    pullPolicy: Always
  build:
    context: ./statuspage
  replicas: 2  # HA 
  env:
    DATABASE_NAME: statuspage
    DATABASE_USER: statuspage
    DATABASE_HOST: postgres
    DATABASE_PORT: "5432"
    REDIS_HOST: redis
    REDIS_PORT: "6379"
    REDIS_TASKS_DB: "0"
    REDIS_CACHING_DB: "1"
    ALLOWED_HOSTS: "*"
    SECRET_KEY: "8cs)mx_OtgGHaZSKsV4Aw%Rahpe@22Ukj9S=UcJ1c$!@7Gwq%c"


# Nginx
nginx:
  image: 
    repository: 992382545251.dkr.ecr.us-east-1.amazonaws.com/at-status-page/status-page-nginx
    tag: nginx
    pullPolicy: Always
  replicas: 2 
  ports:
    http: "80"
    https: "443"

# Volumes
volumes:
  static_files:
    size: 5Gi
